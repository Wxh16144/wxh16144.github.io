---
title: 代码片段
date: 2021-11-05 15:28:22
tags: [Code, JavaScript]
---

记录 Coding 中经常遇到的一个代码片段

### Example-1

**Input**

```javascript
const input = [
  {
    '中文繁体(zh_HK)': '1. 任务针对对象是啊实打实的',
    '中文简体(zh_CN)': '1. 任务针对对象是啊实打实的'
  },
  {
    '中文繁体(zh_HK)': '2.任务有效期是啊实打实的',
    '中文简体(zh_CN)': '2.任务有效期是啊实打实的',
    '英文(en_US)': '1.asdhaisd'
  }
];
```

**Output**

```javascript
const output = [
  {
    lang: '中文繁体(zh_HK)',
    value: ['1. 任务针对对象是啊实打实的', '2.任务有效期是啊实打实的']
  },
  {
    lang: '中文简体(zh_CN)',
    value: ['1. 任务针对对象是啊实打实的', '2.任务有效期是啊实打实的']
  },
  { lang: '英文(en_US)', value: ['1.asdhaisd'] }
];
```

**Code**

<details>

<summary>实现代码</summary>

```javascript
const output = input.reduce((arr, obj) => {
  Object.entries(obj).forEach(([lang, value]) => {
    const index = arr.findIndex(item => item.lang === lang);
    if (~index) {
      arr[index].value.push(value);
    } else {
      arr.push({ lang, value: [value] });
    }
  });
  return arr;
}, []);
```

</details>

### Example-2

**Input**

```javascript
const input = [
  '2021/08-01',
  '2021/08-04',
  '2021/08-05',
  '2021/08-06',
  '2021/08-09',
  '2021/08-10',
  '2021/08-11',
  '2021/08-13',
  '2021/08-15'
];
```

**Output**

```javascript
const output = {
  continuous: [
    { start: '2021/8/4', end: '2021/8/6' },
    { start: '2021/8/9', end: '2021/8/11' }
  ],
  divergent: ['2021/8/1', '2021/8/13', '2021/8/15']
};
```

**Code**

<details>

<summary>实现代码</summary>

```javascript
const DAY = 24 * 60 * 60 * 1000;

const date2Time = date => new Date(date).getTime();
const time2Date = time => new Intl.DateTimeFormat('cn').format(time);

function summaryRanges(dates) {
  const nums = dates.map(date2Time);
  const continuous = [],
    divergent = [];
  let left = 0,
    right = 0;
  while (right < nums.length) {
    while (right + 1 < nums.length && nums[right] + DAY === nums[right + 1]) {
      right++;
    }
    if (right > left) {
      continuous.push({
        start: time2Date(nums[left]),
        end: time2Date(nums[right])
      });
    }
    if (right == left) {
      divergent.push(time2Date(nums[left]));
    }
    left = right + 1;
    right = left;
  }
  return { continuous, divergent };
}

const output = summaryRanges(input);
```

</details>
